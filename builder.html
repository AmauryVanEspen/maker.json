<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Civic.JSON Builder</title>
    <!-- dependencies (jquery, handlebars and bootstrap) -->

    <script src="//code.jquery.com/jquery-1.11.1.min.js" type="text/javascript">
    </script>
    <script src=
    "//cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.3/handlebars.min.js"
    type="text/javascript">
    </script>
    <link href=
    "//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel=
    "stylesheet" type="text/css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"
    type="text/javascript">
    </script><!-- alpaca -->
    <link href="//code.cloudcms.com/alpaca/1.5.15/bootstrap/alpaca.min.css"
    rel="stylesheet" type="text/css">
    <script src="//code.cloudcms.com/alpaca/1.5.15/bootstrap/alpaca.min.js"
    type="text/javascript">
    </script>
</head>
<body>
    <div id="container">
        <div class="center-block text-center" id="instructions">
            <h1><a href="/index.html">civic.json builder</a></h1>
            <p>document your project for the betterment of humankind</p>
        </div>
        <div id="about" class="center-block form">
            The form below will help you build a valid civic.json file. Fill
            out all of the required fields (marked by a start) and any others. Next, you can click the buttons at the bottom of the page to render and then download the output to your computer.
        </div>
        <div class="center-block form" id="form"></div>
        <pre class="center-block form" id="results"></pre>
        <div class="text-center">
            <a id="download_link"><button class="btn btn-default" id="download" type=
            "submit" disabled="disabled">Download File</button></a>
        </div>
    </div>
    <script type="text/javascript">

    $.getJSON("schema.json", function(json) {
    $("#form").alpaca({
        "schema": json,
        "options": {
          "form": {
            "buttons": {
              "submit": {
                "title": "Render Civic.JSON",
                "styles": "btn btn-primary",
                "click": function () {
                    var val = this.getValue();
                    if (this.isValid(true)) {
                        $("#results").text('');
                        var results = JSON.stringify(val, null, "  ");
                        $("#results").append(results);
                        $("#download").removeAttr('disabled');
                        $("#download_link").attr({
                          'href': 'data:text/json;charset=utf-8,' + encodeURIComponent(results),
                          'target': '_blank',
                          'download': 'civic.json'                          
                        });
                    }                    
                  }
                }
              }
            }
          }
      });
    });

    </script>
    <link href="index.css" rel="stylesheet">
</body>
</html>